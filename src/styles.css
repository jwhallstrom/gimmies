@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root { height: 100%; }
body { font-family: ui-sans-serif, system-ui, sans-serif; }

/* ==========================================================================
   Mobile Optimizations - Touch & Performance
   ========================================================================== */

/* Prevent double-tap zoom on interactive elements */
button, a, [role="button"], input, select, textarea {
  touch-action: manipulation;
}

/* Prevent pull-to-refresh in PWA mode (allows internal scrolling) */
html {
  overscroll-behavior-y: contain;
}

/* Minimum 44px touch targets for accessibility */
.touch-target {
  min-height: 44px;
  min-width: 44px;
}

/* Ensure inputs don't zoom on iOS (font-size >= 16px) */
input, select, textarea {
  font-size: 16px !important;
}

/* Prevent text selection on UI elements */
button, a, [role="button"], .no-select {
  -webkit-user-select: none;
  user-select: none;
}

/* Smooth momentum scrolling */
.scroll-smooth {
  -webkit-overflow-scrolling: touch;
}

/* Fast tap response - remove 300ms delay */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Active states for touch feedback */
button:active:not(:disabled),
a:active,
[role="button"]:active {
  transform: scale(0.98);
  transition: transform 0.1s ease;
}

/* Prevent rubber-banding on fixed elements */
.fixed {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Safe area helpers (base padding + overridable via CSS variables) */
.pt-safe {
  --pt-safe-base: 0.75rem;
  padding-top: var(--pt-safe-base);
}

.pb-safe {
  --pb-safe-base: 0.5rem;
  padding-bottom: var(--pb-safe-base);
}

.pl-safe {
  --pl-safe-base: 1rem;
  padding-left: var(--pl-safe-base);
}

.pr-safe {
  --pr-safe-base: 1rem;
  padding-right: var(--pr-safe-base);
}

/* Optional overrides for base padding */
.pt-safe-base-0 { --pt-safe-base: 0; }
.pb-safe-base-0 { --pb-safe-base: 0; }
.pb-safe-base-tight { --pb-safe-base: 0.25rem; }
.pl-safe-base-0 { --pl-safe-base: 0; }
.pr-safe-base-0 { --pr-safe-base: 0; }

.bottom-nav {
  padding: 0.5rem 0.25rem 0.5rem;
}

@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .bottom-nav {
    padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
  }
}

@supports (padding-bottom: constant(safe-area-inset-bottom)) {
  .bottom-nav {
    padding-bottom: max(0.5rem, constant(safe-area-inset-bottom));
  }
}

.content-with-footer {
  padding-bottom: 8rem;
}

@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .content-with-footer {
    padding-bottom: calc(8rem + env(safe-area-inset-bottom));
  }
}

@supports (padding-bottom: constant(safe-area-inset-bottom)) {
  .content-with-footer {
    padding-bottom: calc(8rem + constant(safe-area-inset-bottom));
  }
}

/* PWA Safe Area Support - standalone detection (WebKit + others) */
@media (display-mode: standalone) {
  .pt-safe {
    padding-top: calc(var(--pt-safe-base) + constant(safe-area-inset-top));
    padding-top: calc(var(--pt-safe-base) + env(safe-area-inset-top));
  }

  .pb-safe {
    padding-bottom: calc(var(--pb-safe-base) + constant(safe-area-inset-bottom));
    padding-bottom: calc(var(--pb-safe-base) + env(safe-area-inset-bottom));
  }
  
  .pl-safe {
    padding-left: calc(var(--pl-safe-base) + constant(safe-area-inset-left));
    padding-left: calc(var(--pl-safe-base) + env(safe-area-inset-left));
  }

  .pr-safe {
    padding-right: calc(var(--pr-safe-base) + constant(safe-area-inset-right));
    padding-right: calc(var(--pr-safe-base) + env(safe-area-inset-right));
  }
}

/* Mobile viewport fix - Use dynamic viewport units */
@supports (-webkit-touch-callout: none) {
  .min-h-screen {
    min-height: -webkit-fill-available;
  }
  
  .h-screen {
    height: 100dvh;
    height: -webkit-fill-available;
  }
  
  .min-h-dvh {
    min-height: 100dvh;
    min-height: -webkit-fill-available;
  }
}

/* Full-screen overlay for modals/profile editor */
.fullscreen-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  height: 100dvh;
  z-index: 10000;
}

@media (display-mode: standalone) {
  .fullscreen-overlay {
    padding-top: constant(safe-area-inset-top);
    padding-top: env(safe-area-inset-top);
    padding-bottom: constant(safe-area-inset-bottom);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: constant(safe-area-inset-left);
    padding-left: env(safe-area-inset-left);
    padding-right: constant(safe-area-inset-right);
    padding-right: env(safe-area-inset-right);
  }
}

/* Standalone fallback via body class (set in JS for iOS Safari) */
body.pwa-standalone .pt-safe {
  padding-top: calc(var(--pt-safe-base) + constant(safe-area-inset-top));
  padding-top: calc(var(--pt-safe-base) + env(safe-area-inset-top));
}

body.pwa-standalone .pb-safe {
  padding-bottom: calc(var(--pb-safe-base) + constant(safe-area-inset-bottom));
  padding-bottom: calc(var(--pb-safe-base) + env(safe-area-inset-bottom));
}

body.pwa-standalone .pl-safe {
  padding-left: calc(var(--pl-safe-base) + constant(safe-area-inset-left));
  padding-left: calc(var(--pl-safe-base) + env(safe-area-inset-left));
}

body.pwa-standalone .pr-safe {
  padding-right: calc(var(--pr-safe-base) + constant(safe-area-inset-right));
  padding-right: calc(var(--pr-safe-base) + env(safe-area-inset-right));
}

body.pwa-standalone .fullscreen-overlay {
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: constant(safe-area-inset-left);
  padding-left: env(safe-area-inset-left);
  padding-right: constant(safe-area-inset-right);
  padding-right: env(safe-area-inset-right);
}

/* Use dynamic viewport units */
body, html {
  min-height: 100dvh;
}

/* Note: Footer safe area is handled by .bottom-nav class above */
/* Main content padding is handled by .content-with-footer class */

/* Sticky header top position - stick to top of scroll container */
.sticky-header-top {
  top: 0;
}

/* ==========================================================================
   Gimmies “ticker” (ESPN-style marquee)
   ========================================================================== */

@keyframes gimmies-marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.gimmies-ticker {
  overflow: hidden;
}

.gimmies-ticker__inner {
  white-space: nowrap;
  overflow: hidden;
}

.gimmies-ticker__track {
  display: inline-block;
  padding-left: 100%;
  animation-name: gimmies-marquee;
  animation-duration: var(--gimmies-ticker-duration, 38s);
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  will-change: transform;
}

/* Orange accent inside ticker */
.gimmies-ticker strong {
  color: #f97316; /* gimmies orange */
}

@media (prefers-reduced-motion: reduce) {
  .gimmies-ticker__track {
    animation: none;
    padding-left: 0;
  }
}

/* ==========================================================================
   Gimmies Card Depth System
   ========================================================================== */

/* Elevated card - subtle lift */
.gimmies-card {
  background: white;
  border-radius: 1rem;
  border: 1px solid rgba(226, 232, 240, 0.8);
  box-shadow: 
    0 1px 3px rgba(0, 0, 0, 0.04),
    0 4px 12px rgba(0, 0, 0, 0.03);
  transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.gimmies-card:hover {
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.06),
    0 8px 24px rgba(0, 0, 0, 0.04);
}

/* Primary action card */
.gimmies-card-primary {
  background: linear-gradient(135deg, var(--tw-gradient-from, #2563eb) 0%, var(--tw-gradient-to, #1d4ed8) 100%);
  box-shadow: 
    0 4px 12px rgba(37, 99, 235, 0.25),
    0 8px 24px rgba(37, 99, 235, 0.15);
}

.gimmies-card-primary:hover {
  box-shadow: 
    0 6px 16px rgba(37, 99, 235, 0.3),
    0 12px 32px rgba(37, 99, 235, 0.2);
}

/* Hero card - more prominent */
.gimmies-hero {
  background: linear-gradient(180deg, white 0%, #fafbfc 100%);
  border-radius: 1.5rem;
  border: 1px solid rgba(226, 232, 240, 0.8);
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.04),
    0 8px 24px rgba(0, 0, 0, 0.06);
}

/* Subtle inner glow for inputs */
.gimmies-input-glow:focus {
  box-shadow: 
    0 0 0 3px rgba(37, 99, 235, 0.1),
    inset 0 1px 2px rgba(0, 0, 0, 0.02);
}

/* Smooth animations */
@keyframes gimmies-fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.gimmies-animate-in {
  animation: gimmies-fade-in 0.3s ease-out forwards;
}

/* Staggered children animation */
.gimmies-stagger > * {
  animation: gimmies-fade-in 0.3s ease-out forwards;
  opacity: 0;
}

.gimmies-stagger > *:nth-child(1) { animation-delay: 0ms; }
.gimmies-stagger > *:nth-child(2) { animation-delay: 50ms; }
.gimmies-stagger > *:nth-child(3) { animation-delay: 100ms; }
.gimmies-stagger > *:nth-child(4) { animation-delay: 150ms; }
.gimmies-stagger > *:nth-child(5) { animation-delay: 200ms; }
.gimmies-stagger > *:nth-child(6) { animation-delay: 250ms; }

/* Dark mode card styles */
@media (prefers-color-scheme: dark) {
  .gimmies-card {
    background: rgb(15 23 42);
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 1px 3px rgba(0, 0, 0, 0.2),
      0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .gimmies-hero {
    background: linear-gradient(180deg, rgb(15 23 42) 0%, rgb(30 41 59) 100%);
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.3),
      0 8px 24px rgba(0, 0, 0, 0.4);
  }
}

/* ============================================================================
   Tournament Registration Modal Animations
   ============================================================================ */

@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out forwards;
}

@keyframes slide-down {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(100%);
    opacity: 0;
  }
}

.animate-slide-down {
  animation: slide-down 0.25s ease-in forwards;
}

@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out forwards;
}